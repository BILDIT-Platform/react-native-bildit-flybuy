(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[428],{3905:function(e,t,n){"use strict";n.d(t,{Zo:function(){return c},kt:function(){return m}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},i=Object.keys(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)n=i[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var s=a.createContext({}),u=function(e){var t=a.useContext(s),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},c=function(e){var t=u(e.components);return a.createElement(s.Provider,{value:t},e.children)},d={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},p=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,i=e.originalType,s=e.parentName,c=l(e,["components","mdxType","originalType","parentName"]),p=u(n),m=r,f=p["".concat(s,".").concat(m)]||p[m]||d[m]||i;return n?a.createElement(f,o(o({ref:t},c),{},{components:n})):a.createElement(f,o({ref:t},c))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var i=n.length,o=new Array(i);o[0]=p;var l={};for(var s in t)hasOwnProperty.call(t,s)&&(l[s]=t[s]);l.originalType=e,l.mdxType="string"==typeof e?e:r,o[1]=l;for(var u=2;u<i;u++)o[u]=n[u];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}p.displayName="MDXCreateElement"},9443:function(e,t,n){"use strict";var a=(0,n(7294).createContext)(void 0);t.Z=a},944:function(e,t,n){"use strict";var a=n(7294),r=n(9443);t.Z=function(){var e=(0,a.useContext)(r.Z);if(null==e)throw new Error("`useUserPreferencesContext` is used outside of `Layout` Component.");return e}},6566:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return v},frontMatter:function(){return y},metadata:function(){return k},toc:function(){return g}});var a=n(2122),r=n(9756),i=n(7294),o=n(3905),l=n(944),s=n(6010),u="tabItem_1uMI",c="tabItemActive_2DSg";var d=37,p=39;var m=function(e){var t=e.lazy,n=e.block,a=e.defaultValue,r=e.values,o=e.groupId,m=e.className,f=(0,l.Z)(),y=f.tabGroupChoices,k=f.setTabGroupChoices,g=(0,i.useState)(a),h=g[0],v=g[1],b=i.Children.toArray(e.children),N=[];if(null!=o){var S=y[o];null!=S&&S!==h&&r.some((function(e){return e.value===S}))&&v(S)}var O=function(e){var t=e.currentTarget,n=N.indexOf(t),a=r[n].value;v(a),null!=o&&(k(o,a),setTimeout((function(){var e,n,a,r,i,o,l,s;(e=t.getBoundingClientRect(),n=e.top,a=e.left,r=e.bottom,i=e.right,o=window,l=o.innerHeight,s=o.innerWidth,n>=0&&i<=s&&r<=l&&a>=0)||(t.scrollIntoView({block:"center",behavior:"smooth"}),t.classList.add(c),setTimeout((function(){return t.classList.remove(c)}),2e3))}),150))},C=function(e){var t,n;switch(e.keyCode){case p:var a=N.indexOf(e.target)+1;n=N[a]||N[0];break;case d:var r=N.indexOf(e.target)-1;n=N[r]||N[N.length-1]}null==(t=n)||t.focus()};return i.createElement("div",{className:"tabs-container"},i.createElement("ul",{role:"tablist","aria-orientation":"horizontal",className:(0,s.Z)("tabs",{"tabs--block":n},m)},r.map((function(e){var t=e.value,n=e.label;return i.createElement("li",{role:"tab",tabIndex:h===t?0:-1,"aria-selected":h===t,className:(0,s.Z)("tabs__item",u,{"tabs__item--active":h===t}),key:t,ref:function(e){return N.push(e)},onKeyDown:C,onFocus:O,onClick:O},n)}))),t?(0,i.cloneElement)(b.filter((function(e){return e.props.value===h}))[0],{className:"margin-vert--md"}):i.createElement("div",{className:"margin-vert--md"},b.map((function(e,t){return(0,i.cloneElement)(e,{key:t,hidden:e.props.value!==h})}))))};var f=function(e){var t=e.children,n=e.hidden,a=e.className;return i.createElement("div",{role:"tabpanel",hidden:n,className:a},t)},y={sidebar_position:2},k={unversionedId:"Setup",id:"Setup",isDocsHomePage:!1,title:"Setup",description:"Installation",source:"@site/docs/Setup.md",sourceDirName:".",slug:"/Setup",permalink:"/react-native-bildit-flybuy/docs/Setup",editUrl:"https://github.com/bildit-Platform/react-native-bildit-flybuy/edit/main/website/docs/Setup.md",version:"current",sidebarPosition:2,frontMatter:{sidebar_position:2},sidebar:"tutorialSidebar",previous:{title:"Introduction",permalink:"/react-native-bildit-flybuy/docs/intro"},next:{title:"Usage",permalink:"/react-native-bildit-flybuy/docs/Usage"}},g=[{value:"Installation",id:"installation",children:[]},{value:"Post-install Steps",id:"post-install-steps",children:[{value:"iOS",id:"ios",children:[]},{value:"Android",id:"android",children:[]}]},{value:"Requesting permissions at runtime",id:"requesting-permissions-at-runtime",children:[]}],h={toc:g};function v(e){var t=e.components,n=(0,r.Z)(e,["components"]);return(0,o.kt)("wrapper",(0,a.Z)({},h,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h2",{id:"installation"},"Installation"),(0,o.kt)("p",null,"You can install the React Native FlyBuy SDK with npm or yarn, as follows:"),(0,o.kt)(m,{defaultValue:"npm",groupId:"npm2yarn",values:[{label:"npm",value:"npm"},{label:"Yarn",value:"yarn"}],mdxType:"Tabs"},(0,o.kt)(f,{value:"npm",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"npm install --save react-native-bildit-flybuy\n\n# RN >= 0.60\n\ncd ios && pod install\n\n# RN < 0.60\n\nreact-native link react-native-bildit-flybuy\n"))),(0,o.kt)(f,{value:"yarn",mdxType:"TabItem"},(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-bash"},"yarn add react-native-bildit-flybuy\n\n# RN >= 0.60\n\ncd ios && pod install\n\n# RN < 0.60\n\nreact-native link react-native-bildit-flybuy\n")))),(0,o.kt)("h2",{id:"post-install-steps"},"Post-install Steps"),(0,o.kt)("h3",{id:"ios"},"iOS"),(0,o.kt)("p",null,"In order to use the SDK your app will need to request the proper permissions."),(0,o.kt)("h4",{id:"enable-background-modes"},"Enable Background Modes"),(0,o.kt)("p",null,"Under the \u201cGeneral\u201d tab for your iOS target, select Capabilities and scroll down to Background Modes."),(0,o.kt)("p",null,"For Pickup, enable Background Modes and select ",(0,o.kt)("inlineCode",{parentName:"p"},"Location updates"),", ",(0,o.kt)("inlineCode",{parentName:"p"},"Background fetch"),", and ",(0,o.kt)("inlineCode",{parentName:"p"},"Remote notifications"),"."),(0,o.kt)("p",null,"For Presence, enable Background Modes and select ",(0,o.kt)("inlineCode",{parentName:"p"},"Acts as a Bluetooth LE Accessory"),"."),(0,o.kt)("img",{src:"/img/quickstart_background_modes.png"}),(0,o.kt)("h4",{id:"permission-descriptions"},"Permission Descriptions"),(0,o.kt)("p",null,"Flybuy Pickup uses mobile sensor data to identify the location of a customer. Flybuy Presence also requires Bluetooth permissions."),(0,o.kt)("p",null,"The Pickup module requires Location services permissions to properly function. Specifically, the SDK supports Always permission, but only needs the When in Use permission."),(0,o.kt)("p",null,"If you are already asking users for the required permissions, you should review the usage description. The usage description explains why the application requires Always authorization."),(0,o.kt)("p",null,"If you currently do not ask users for the required permissions, you should add a usage description to your app. Usage descriptions are set in the ",(0,o.kt)("inlineCode",{parentName:"p"},"Info.plist")," file."),(0,o.kt)("table",null,(0,o.kt)("thead",{parentName:"table"},(0,o.kt)("tr",{parentName:"thead"},(0,o.kt)("th",{parentName:"tr",align:null},"Name"),(0,o.kt)("th",{parentName:"tr",align:null},"Suggested Description"))),(0,o.kt)("tbody",{parentName:"table"},(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"NSLocationAlwaysAndWhenInUseUsageDescription")),(0,o.kt)("td",{parentName:"tr",align:null},"To accurately locate you for order delivery")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"NSLocationWhenInUseUsageDescription")),(0,o.kt)("td",{parentName:"tr",align:null},"To accurately locate you for order delivery")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"NSBluetoothAlwaysUsageDescription")),(0,o.kt)("td",{parentName:"tr",align:null},"To communicate via Bluetooth for an order at the store")),(0,o.kt)("tr",{parentName:"tbody"},(0,o.kt)("td",{parentName:"tr",align:null},(0,o.kt)("inlineCode",{parentName:"td"},"NSBluetoothPeripheralUsageDescription")),(0,o.kt)("td",{parentName:"tr",align:null},"To communicate via Bluetooth for an order at the store")))),(0,o.kt)("h3",{id:"android"},"Android"),(0,o.kt)("h4",{id:"google-api-keys"},"Google API Keys"),(0,o.kt)("p",null,"The SDK needs a Google API key for access to location APIs. If you have not already, go to your Google API Console and create an Android API key. Then, enable the Maps SDK for Android."),(0,o.kt)("p",null,"Add the following to your ",(0,o.kt)("inlineCode",{parentName:"p"},"AndroidManifest.xml")," with the API key you generated above."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-xml"},'<application>\n    <meta-data\n        android:name="com.google.android.geo.API_KEY"\n        android:value="<INSERT_API_KEY>"/>\n</application>\n')),(0,o.kt)("h4",{id:"setting-permissions"},"Setting Permissions"),(0,o.kt)("p",null,"Flybuy uses mobile sensor data to identify the location of a customer. The Flybuy SDK requires ",(0,o.kt)("inlineCode",{parentName:"p"},"ACCESS_FINE_LOCATION")," and ",(0,o.kt)("inlineCode",{parentName:"p"},"ACCESS_BACKGROUND_LOCATION")," permissions to properly function correctly. The app must request the permission at runtime."),(0,o.kt)("h4",{id:"adding-permissions-to-androidmanifestxml"},"Adding permissions to ",(0,o.kt)("inlineCode",{parentName:"h4"},"AndroidManifest.xml")),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-xml"},'<uses-permission android:name="android.permission.ACCESS_FINE_LOCATION" />\n<uses-permission android:name="android.permission.ACCESS_BACKGROUND_LOCATION" />\n')),(0,o.kt)("h2",{id:"requesting-permissions-at-runtime"},"Requesting permissions at runtime"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"import {\n  requestMultiple,\n  PERMISSIONS,\n  RESULTS,\n} from 'react-native-permissions';\n\nconst getLocationPermissions = async () => {\n  const granted = await requestMultiple(\n    Platform.select({\n      android: [\n        PERMISSIONS.ANDROID.ACCESS_BACKGROUND_LOCATION,\n        PERMISSIONS.ANDROID.ACCESS_FINE_LOCATION,\n      ],\n      ios: [PERMISSIONS.IOS.LOCATION_WHEN_IN_USE],\n    }),\n    {\n      title: 'ExampleApp',\n      message: 'ExampleApp would like access to your location ',\n    }\n  );\n  return granted === RESULTS.GRANTED;\n};\n\nReact.useEffect(() => {\n  getLocationPermissions();\n}, []);\n")),(0,o.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"},"Whenever the location permission changes (accepted or declined), make sure to call:"),(0,o.kt)("pre",{parentName:"div"},(0,o.kt)("code",{parentName:"pre",className:"language-js"},"FlyBuy.Pickup.onLocationPermissionChanged();\n")))))}v.isMDXComponent=!0},6010:function(e,t,n){"use strict";function a(e){var t,n,r="";if("string"==typeof e||"number"==typeof e)r+=e;else if("object"==typeof e)if(Array.isArray(e))for(t=0;t<e.length;t++)e[t]&&(n=a(e[t]))&&(r&&(r+=" "),r+=n);else for(t in e)e[t]&&(r&&(r+=" "),r+=t);return r}function r(){for(var e,t,n=0,r="";n<arguments.length;)(e=arguments[n++])&&(t=a(e))&&(r&&(r+=" "),r+=t);return r}n.d(t,{Z:function(){return r}})}}]);